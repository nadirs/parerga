{% macro article_h1(name, link='') -%}
{% set slug_title = slugify(name) %}
<h1 class="textshadowlight">
    {% if link %}<a id="{{ slug_title }}" href="{{ link }}#{{ slug_title }}">{% endif %}{{ name }}{% if link %}</a>{% endif %}
</h1>
{%- endmacro %}
{%- macro preview_post_short(post, tags_without_link=[]) -%}
    <h3 class="textshadowlight"><a href="/{{ post.id}}/">{{ post.title }}</a></h3>
    <div><sup>
        {%- for tag in post.tags %}
        {% if tag not in tags_without_link %}<a href="/tag/{{ tag }}/">{% endif -%}
            {{ tag }}
        {%- if tag not in tags_without_link %}</a>{% endif -%}
        {%- if not loop.last %},{% endif -%}
        {% endfor %}</sup>
    </div>
    {{ post.short_content_html }}
    <section class="link_more"><a href="/{{ post.id}}/">more...</a></section>
{%- endmacro -%}
{% set sitename = "Parerga" %}
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="{{sitename}}, a blog about learning software craftmanship"/>
    <title>{% block title -%}{{ sitename }}{%- endblock %}</title>
    <!--[ don't use CSS until HTML is complete]-->
    <link rel="stylesheet" href={{ url_for("static", filename="style.css") }} />
    <link rel="stylesheet" href={{ url_for("static", filename="blueshift.css") }} />
    <!---->
    <link rel="shortcut icon" href="{{ url_for("static", filename="favicon.png") }}" />
    <!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
</head>
<body>
    <section id="wrapper" class="shadow">
    <header>
    <div class="center">
        <a href="/"><img id="logo" alt="Parerga" src="{{ url_for("static", filename="logo-wide.png") }}" /></a>
    </div>
        {% block header %}
        <nav class="index">
        <ul>
            {% set navigation = [
                    ("/", "index"),
                    ("/tag/", "tags"),
                    ("/about/", "about"),
                ] %}
            {%- for href, caption in navigation -%}
            <li>
                <a class="button" href="{{ href }}">{{ caption|e }}</a>
            </li>
            {# if not loop.last %} | {% endif #}
            {%- endfor %}
        </ul>
        </nav>
        {%- endblock %}
    </header>
    <section>
        <article>
            {% block container %}
            {% endblock %}
        </article>
    </section>
    <footer class="footer">
    {% block footer %}
        <section class="center" style="width:600px;margin:auto;">
            <hr />
            <div class="cclicense"><sub>
                <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Parerga</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">Nadir Sampaoli</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="parerga-nadir.rhcloud.com" rel="dct:source">parerga-nadir.rhcloud.com</a>.
        </sub></div><p>~~~</p>
            <p><sub>
                Developed with <a href="http://flask.pocoo.org/">Flask</a>
        </sub></p>
        </section>
    {% endblock %}
    </footer>
    </section>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36310777-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
